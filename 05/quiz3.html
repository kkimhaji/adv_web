<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>DOM</title>
    <style>
      body {
        padding: 10px;
      }
      .box {
        width: 100px;
        height: 30px;
        background-color: #ddd;
      }
      .red {
        background-color: red;
      }
    </style>
  </head>
  <body>
    <div>
      <input type="text" class="txt" value="hello" />
      <button class="text-btn">TEXT 넣기</button>
      <br />
      <button class="add-red">빨간색으로</button>
      <button class="add-btn">추가</button>
      <button class="delete-btn">삭제</button>
      <button class="reset-btn">초기화</button>
      <button class="toggle-btn">보이기,숨기기 토글</button>
      <button class="image-btn">이미지</button>
    </div>

    <div class="box"></div>

    <script>
        var $red_btn = document.querySelector('.add-red');
        var $add_btn = document.querySelector('.add-btn');
        var $del_btn = document.querySelector('.delete-btn');
        var $txt_btn = document.querySelector('.text-btn');
        var $reset_btn = document.querySelector('.reset-btn');
        var $toggle_btn = document.querySelector('.toggle-btn');
        var $img_btn = document.querySelector('.image-btn');

        function box(){
            var $box = document.querySelectorAll('.box');
            return $box;
        }

        function toRed(){

            var $box = box();

            for(var i=0;i<$box.length;i++){
                $box[i].classList.add('red');
                //+='red'면 계속 class 이름에 red가 추가 
            }
        }
        function addBox(){
            var $div = document.createElement('div');
            $div.className = 'box';
            document.body.appendChild($div);
        }

        function delBox(){
            if(document.querySelector('.box')){
                document.body.removeChild(document.querySelector('.box'));
            }
        }

        function addTxt(){
            var $box = box();

            var $txt = document.querySelector('.txt');
            var txtValue = $txt.value;
            for(var i=0;i<$box.length;i++){
                $box[i].innerHTML = txtValue;
            }
        }

        function resetBox(){
            var $box = box();

            for(var i=0;i<$box.length;i++){
                document.body.removeChild($box[i]);
            }
        }

        function tglBox(){
            var $box = box();
            if($box.length){
                if($box[0].style.visibility == 'hidden'){
                    for(var i=0;i<$box.length;i++){
                        $box[i].style.visibility = 'visible';
                    }
                }else{
                    for(var i=0;i<$box.length;i++){
                        $box[i].style.visibility = 'hidden';
                    }
                }
            }
        }
        
        function showImg(){
            var $box = box();
            var src = 'https://i.imgur.com/69NjYBH.png';
            var str = '<img src='+src+'></img>';
            if($box.length ==0){
                addBox();
                showImg();
            }

            for(var i=0;i<$box.length;i++){
                $box[i].innerHTML = str;
                console.log('img');
            }
            //내부로 안들어가는데... 크기가 커서 그런가 ㅠㅠ 
        }

        $red_btn.addEventListener('click', toRed);
        $add_btn.addEventListener('click', addBox);
        $del_btn.addEventListener('click', delBox);
        $txt_btn.addEventListener('click', addTxt);
        $reset_btn.addEventListener('click', resetBox);
        $toggle_btn.addEventListener('click', tglBox);
        $img_btn.addEventListener('click', showImg);

    </script>
  </body>
</html>